;if("undefined"!=typeof jSanity)throw"jSanity has been defined, please check if there's any duplicate reference.";jSanity={},function(t){"use strict";var e={inputString:"",maxWidth:"600px",maxHeight:"200px",overflow:"hidden",allowLinks:!0,linkClickCallback:null,customProtocols:{},allowRelativeURLs:!1,allowAudioVideo:!1,externalContentCallback:function(t,e,r,o){var i;if("attribute"===t&&"src"===e)for(var n in o)if(o.hasOwnProperty(n)&&r.substring(0,n.length)===n){i=!0;break}return i||(r="CSSURL"===t?'url("about:blank")':"about:blank"),r},isolatedTargetDOM:!1,directModifySource:!0,attributePrefix:"jSanity",dataAttributeCallback:null,debugLevel:0,onFinishedCallback:null},r=function(){this.sync=!0,this.jobs=[],this.id=r.globalId++,this.listnerPosfix=0,this.onCompletedListners={},this.onNewJobAddedListners={},this.useSync=function(){this.sync=!0},this.useAsync=function(){this.sync=!1},this.addNewJob=function(t){this.jobs.push(t);for(var e in this.onNewJobAddedListners)if(this.onNewJobAddedListners.hasOwnProperty(e))try{this.onNewJobAddedListners[e](t)}catch(r){}},this.registerOnJobCompleted=function(t){var e;return this.listnerPosfix+=1,e=this.id.toString()+this.listnerPosfix.toString(),this.onCompletedListners[e]=t,e},this.registerOnNewJobAdded=function(t){var e;return this.listnerPosfix+=1,e=this.id.toString()+this.listnerPosfix.toString(),this.onNewJobAddedListners[e]=t,e},this.unRegisterListner=function(t){this.onCompletedListners[t]?delete this.onCompletedListners[t]:this.onNewJobAddedListners[t]&&delete this.onNewJobAddedListners[t]},this.run=function(){var t,e,o=null,i=this.sync;t=(new Date).getTime();do{if(o=this.jobs.pop())try{o()}catch(n){}else for(var a in this.onCompletedListners)if(this.onCompletedListners.hasOwnProperty(a))try{this.onCompletedListners[a]()}catch(n){}e=(new Date).getTime(),o&&!this.sync&&(i=e-t<r.maxExecutionTimeForMergedAsyncJobs?!0:!1)}while(i&&o);if(!this.sync&&o){var l=function(t,e){return function(){t.apply(e)}}(this.run,this);setTimeout(l,0)}}};r.globalId=0,r.maxExecutionTimeForMergedAsyncJobs=15;var o=function(t,r){function o(t,e){window.console&&c.debugLevel>=t&&console.log("jSanity: "+e)}function i(t,e,r){return function(){var o=d.currentNode;d.currentNode=t,a(e,r),d.currentNode=o}}function n(t,e,r){var o=i(t,e,r);s.addNewJob(o)}function a(t,e){var r,i,a,l,s,h,y,w,k,v;r=d.currentNode;for(var x,C,S,A=new Array,L=d.firstChild();null!==L;L=d.nextSibling())switch(L.nodeType){case L.ELEMENT_NODE:if(a=L.tagName.toLowerCase(),a in p[t].knownElements){if(l=t,"svg"===a&&(t="http://www.w3.org/2000/svg"),i=c.directModifySource?L:"default"==t?b.createElement(a):b.createElementNS(t,a),s=!1,c.allowAudioVideo||"video"!==a&&"audio"!==a&&"source"!==a||(s=!0),"style"===a&&(s=!0),!s){x=null;for(var M=0;M<L.attributes.length;M++)if(v=L.attributes[M].name.toLowerCase(),v in p[t].knownAttributes)if("href"===v){if(h=!1,c.allowLinks)for(var N in f)if(f.hasOwnProperty(N)&&L.attributes[M].value.substring(0,N.length)===N){h=!0,i.setAttribute("href",L.attributes[M].value),null!==c.linkClickCallback&&(x="/*jSanityClickCallback*/");break}h||(x="/*jSanityReturnFalseCallback*/")}else if("class"===v)c.directModifySource&&(L.removeAttribute(L.attributes[M].name),M--);else if("name"===v||"id"===v)y=c.attributePrefix+"_","undefined"!=typeof u&&(y+=u+"_"),L.attributes[M].value.length>0&&(L.attributes[M].value.length>y.length&&L.attributes[M].value.substring(0,y.length)===y?i.setAttribute(L.attributes[M].name,L.attributes[M].value):i.setAttribute(L.attributes[M].name,y+L.attributes[M].value));else if("src"===v){if(w=L.attributes[M].value,null!==c.externalContentCallback&&(w=c.externalContentCallback("attribute","src",w,f)),null===w){s=!0;break}i.setAttribute("src",w)}else i.setAttribute(L.attributes[M].name,L.attributes[M].value);else if(null!==c.dataAttributeCallback&&"data-"===v.substring(0,5)){if(k=c.dataAttributeCallback(L.attributes[M].name,L.attributes[M].value),null!==k)try{i.setAttribute(L.attributes[M].name,k)}catch(T){o(0,"Unable to set CSS attribute: "+L.attributes[M].name+" to "+k)}}else c.directModifySource&&"style"!==v&&(L.removeAttribute(L.attributes[M].name),M--),o(1,"Encountered unsupported attribute: "+v);x&&("/*jSanityReturnFalseCallback*/"===x&&i.setAttribute("href","#"),i.setAttribute("onclick",x),g.push(i))}if(!s&&L.style)for(var M=0;M<L.style.length;M++)if(S=L.style[M],S in m){C=!1,w=L.style.getPropertyValue(S),"url("===w.substring(0,4)&&null!==c.externalContentCallback&&(w=c.externalContentCallback("CSSURL",S,w,f),C=!0),"position"===S&&"static"!==w&&"relative"!==w&&"inherit"!==w&&(w="inherit",C=!0);try{c.directModifySource?C&&i.style.setProperty(S,w):i.style.setProperty(S,w)}catch(T){o(0,"Unable to set CSS property: "+S)}}else c.directModifySource&&i.style.setProperty(S,null),o(1,"Encountered unsupported style property: "+S);s?c.directModifySource&&A.push(L):c.directModifySource||e.appendChild(i),s||n(L,t,i),t=l}else c.directModifySource&&A.push(L),o(1,"Encountered unsupported element: "+a);break;case L.TEXT_NODE:c.directModifySource||(i=b.createTextNode(L.nodeValue),e.appendChild(i));break;case L.COMMENT_NODE:break;default:c.directModifySource&&A.push(L),o(1,"Unknown node type: "+L.nodeType)}for(M=0;M<A.length;M++)try{A[M].removeNode(!0)}catch(T){A[M].remove()}d.currentNode=r}function l(t){if(!t)throw"invalid number of parameters. At least one is expected";for(var e=0,r=null,o={};e<arguments.length;e++){if(r=arguments[e],"[object Object]"!=r.toString())throw"Invalid type of parameter";for(var i in r)r.hasOwnProperty(i)&&(o[i]=r[i])}return o}var s=new t;r.onFinishedCallback?s.useAsync():s.useSync();var d,c,u,b,h,p={"default":{knownElements:{html:1,style:1,noscript:1,body:1,section:1,nav:1,article:1,aside:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,hgroup:1,header:1,footer:1,address:1,p:1,hr:1,pre:1,blockquote:1,ol:1,ul:1,li:1,dl:1,dt:1,dd:1,figure:1,figcaption:1,div:1,a:1,em:1,strong:1,small:1,s:1,cite:1,q:1,dfn:1,abbr:1,code:1,"var":1,samp:1,kbd:1,sub:1,sup:1,i:1,b:1,u:1,mark:1,ruby:1,rt:1,rp:1,bdi:1,bdo:1,span:1,br:1,wbr:1,ins:1,del:1,img:1,video:1,audio:1,source:1,map:1,area:1,svg:1,math:1,table:1,caption:1,colgroup:1,col:1,tbody:1,thead:1,tfoot:1,tr:1,td:1,th:1,input:1,button:1,select:1,datalist:1,optgroup:1,option:1,textarea:1,progress:1,meter:1,details:1,summary:1,command:1,menu:1,center:1,font:1},knownAttributes:{"class":1,contenteditable:1,dir:1,hidden:1,id:1,lang:1,spellcheck:1,tabindex:1,title:1,cite:1,reversed:1,start:1,value:1,href:1,hreflang:1,rel:1,datetime:1,alt:1,height:1,ismap:1,src:1,width:1,usemap:1,autoplay:1,controls:1,loop:1,muted:1,preload:1,coords:1,shape:1,span:1,colspan:1,headers:1,rowspan:1,scope:1,checked:1,disabled:1,max:1,maxlength:1,min:1,name:1,placeholder:1,readonly:1,selectiondirection:1,size:1,step:1,selectedindex:1,label:1,selected:1,cols:1,rows:1,selectionend:1,selectionstart:1,wrap:1,low:1,high:1,optimum:1,open:1,align:1,face:1,hspace:1,vspace:1,border:1,cellpadding:1,cellspacing:1}},"http://www.w3.org/2000/svg":{knownElements:{circle:1},knownAttributes:{cx:1,cy:1,r:1,stroke:1,"stroke-width":1,fill:1}}},f={"http://":1,"https://":1,"ftp://":1,"mailto:":1},m={"background-attachment":1,"background-color":1,"background-image":1,"background-position":1,"background-repeat":1,"background-clip":1,"background-origin":1,"background-size":1,border:1,"border-bottom":1,"border-bottom-color":1,"border-bottom-style":1,"border-bottom-width":1,"border-color":1,"border-left":1,"border-left-color":1,"border-left-style":1,"border-left-width":1,"border-right":1,"border-right-color":1,"border-right-style":1,"border-right-width":1,"border-style":1,"border-top":1,"border-top-color":1,"border-top-style":1,"border-top-width":1,"border-width":1,outline:1,"outline-color":1,"outline-style":1,"outline-width":1,"border-bottom-left-radius":1,"border-bottom-right-radius":1,"border-radius":1,"border-top-left-radius":1,"border-top-right-radius":1,"box-decoration-break":1,"box-shadow":1,"overflow-x":1,"overflow-y":1,"overflow-style":1,rotation:1,"rotation-point":1,opacity:1,height:1,"max-height":1,"max-width":1,"min-height":1,"min-width":1,width:1,"box-align":1,"box-direction":1,"box-flex":1,"box-flex-group":1,"box-lines":1,"box-ordinal-group":1,"box-orient":1,"box-pack":1,font:1,"font-family":1,"font-size":1,"font-style":1,"font-variant":1,"font-weight":1,"font-size-adjust":1,"font-stretch":1,"grid-columns":1,"grid-rows":1,margin:1,"margin-bottom":1,"margin-left":1,"margin-right":1,"margin-top":1,"column-count":1,"column-fill":1,"column-gap":1,"column-rule":1,"column-rule-color":1,"column-rule-style":1,"column-rule-width":1,"column-span":1,"column-width":1,columns:1,padding:1,"padding-bottom":1,"padding-left":1,"padding-right":1,"padding-top":1,bottom:1,clear:1,clip:1,display:1,"float":1,left:1,overflow:1,position:1,right:1,top:1,visibility:1,"z-index":1,"border-collapse":1,"border-spacing":1,"caption-side":1,"empty-cells":1,"table-layout":1,color:1,direction:1,"letter-spacing":1,"line-height":1,"text-align":1,"text-decoration":1,"text-indent":1,"text-transform":1,"unicode-bidi":1,"vertical-align":1,"white-space":1,"word-spacing":1,"hanging-punctuation":1,"punctuation-trim":1,"text-align-last":1,"text-justify":1,"text-outline":1,"text-shadow":1,"text-wrap":1,"word-break":1,"word-wrap":1},g=[];this.sanitizeMethod=function(t){var r,o,i,a,u,p;c=l({},e,t),l(f,c.customProtocols),c.isolatedTargetDOM?(c.directModifySource=!1,b=document.implementation.createHTMLDocument("destDoc")):(c.directModifySource=!0,r=document.createElement("span"),b=document),h=document.implementation.createHTMLDocument("sourceDoc"),o=h.createElement("span"),o.innerHTML=c.inputString,h.body.appendChild(o),h.createTreeWalker!==Document.prototype.createTreeWalker&&(h=document.implementation.createHTMLDocument("sourceDoc"),o=h.createElement("span"),h.body.appendChild(o)),d=h.createTreeWalker(h.body,NodeFilter.SHOW_ALL,null,!1),n(d.currentNode,"default",c.isolatedTargetDOM?b.body:r);var m=s.registerOnJobCompleted(function(){if(c.isolatedTargetDOM){var t=document.importNode(b.documentElement,!0);i=t.lastChild.firstChild}else i=c.directModifySource?o:r;for(a=0;a<g.length;a++)u=g[a],p=u.getAttribute("onclick"),"/*jSanityClickCallback*/"===p?u.onclick=c.linkClickCallback:"/*jSanityReturnFalseCallback*/"===p&&(u.onclick=function(){return!1});try{i.style.setProperty("display","inline-block"),c.maxWidth&&i.style.setProperty("max-width",c.maxWidth),c.maxHeight&&i.style.setProperty("max-height",c.maxHeight),c.overflow&&i.style.setProperty("overflow",c.overflow)}catch(e){}g=[],s.unRegisterListner(m),c.onFinishedCallback&&c.onFinishedCallback(i)});return s.run(),i}},i=function(){return"undefined"!=typeof document.documentMode&&document.documentMode<10?!1:!0}();t.isSupport=function(){return i},t.sanitize=function(t){var e;if(!i)throw"jSanity does not support run in current browser version.";return e=new o(r,t),e.sanitizeMethod(t)}}(jSanity);